# [오류 관리] 화면 요구사항

---

## 오류코드 관리

**화면 목적**: 시스템에서 발생하는 오류 코드를 등록/관리하고, 각 오류코드에 대한 핸들러를 할당하는 화면이다.

**접근 경로**: GNB > 오류 관리 > 오류코드 관리

**화면 유형**: 표준 CRUD 화면 (템플릿 A 참조)

### 화면 레이아웃 구성

| 영역 | 설명 |
|------|------|
| 검색 필터 영역 | 상단, 검색 유형 드롭다운 + 검색어 + 오류 핸들러 드롭다운 + 조회 건수 + 조회 버튼 |
| 도구 모음 | 목록 상단 우측, 엑셀 / 출력 버튼 |
| 목록 영역 | 중앙, 오류코드 목록 테이블 |
| 페이지 네비게이션 | 목록 하단 |
| 버튼 영역 | 목록 하단, 등록 버튼 |

### 검색 / 필터

| 필터 항목명 | 입력 유형 | 필수 여부 | 기본값 | 유효성 조건 |
|-------------|-----------|-----------|--------|-------------|
| 검색 유형 | 드롭다운 (오류코드 / 오류제목) | 선택 | 오류코드 | - |
| 검색어 | 텍스트 입력 | 선택 | 빈 값 | - |
| 오류 핸들러 | 드롭다운 (전체 + 핸들러 목록) | 선택 | 전체 | API에서 동적 로드 |

### 목록 표시

| 컬럼명 | 데이터 유형 | 정렬 가능 | 비고 |
|--------|-------------|-----------|------|
| 오류코드 | 텍스트 | 가능 | - |
| 오류제목 | 텍스트 | 가능 | - |
| 오류발생원인 | 텍스트 | 불가 | - |
| 발생회수 | 숫자 | 가능 | - |
| 오류별 핸들러 | 버튼 | 불가 | 클릭 시 오류별 핸들러 관리 팝업 열기 |

- 목록 클릭 시 동작: 오류코드 수정 팝업 열림
- 기본 정렬 기준: 오류코드 오름차순
- 페이지당 기본 표시 건수: 20건

### 등록 / 수정 팝업

| 항목명 | 입력 유형 | 필수 여부 | 수정 가능 여부 | 유효성 조건 |
|--------|-----------|-----------|----------------|-------------|
| 오류코드 | 텍스트 입력 | 필수 | 등록 시만 가능 | 영문/숫자, 최대 20자 |
| 오류제목 | 텍스트 입력 | 필수 | 가능 | 최대 100자 |
| 오류발생원인 | 텍스트 영역 | 선택 | 가능 | 최대 500자 |
| 설명 | 텍스트 영역 | 선택 | 가능 | 최대 200자 |

### 버튼 및 액션

| 버튼명 | 노출 조건 | 클릭 동작 | 권한 제어 |
|--------|-----------|-----------|-----------|
| 등록 | 항상 노출 | 오류코드 등록 팝업 열기 | 쓰기 권한 보유자만 |
| 엑셀 | 항상 노출 | 검색 결과 엑셀 다운로드 | 전체 |
| 출력 | 항상 노출 | 목록 인쇄 | 전체 |
| 저장 (팝업) | 팝업 열림 시 | 오류코드 정보 저장 | 쓰기 권한 |
| 삭제 (팝업) | 수정 모드 시 | 확인 팝업 후 오류코드 삭제 | 쓰기 권한 |
| 오류별 핸들러 (목록) | 목록 행 내 | 오류별 핸들러 관리 팝업 열기 | 전체 |

### 개별 기능 요구사항

- 오류별 핸들러 버튼 클릭 시 해당 오류코드에 할당된 핸들러 목록을 관리하는 팝업이 열려야 한다.
- 핸들러 관리 팝업에서 항목 이동 위젯을 사용하여 핸들러를 추가/제거할 수 있어야 한다.
- 오류 핸들러 드롭다운은 API에서 활성 핸들러 목록을 동적으로 로드하여야 한다.

### 비기능 요구사항

| 항목 | 요구사항 |
|------|----------|
| 응답 속도 | 오류코드 목록 조회 결과가 3초 이내에 표시되어야 한다 |

---

## 오류 발생 현황

**화면 목적**: 시스템에서 발생한 오류의 현황을 오류코드별로 집계하여 조회하는 화면이다 (조회 전용).

**접근 경로**: GNB > 오류 관리 > 오류 발생 현황

**화면 유형**: 조회 전용 화면 (템플릿 B 참조)

### 화면 레이아웃 구성

| 영역 | 설명 |
|------|------|
| 검색 필터 영역 | 상단, 오류코드 자동완성 + 오류발생일 날짜범위 + 조회 건수 + 조회 버튼 |
| 도구 모음 | 목록 상단 우측, 엑셀 / 출력 버튼 |
| 목록 영역 | 중앙, 오류 발생 현황 테이블 |
| 페이지 네비게이션 | 목록 하단 |

### 검색 / 필터

| 필터 항목명 | 입력 유형 | 필수 여부 | 기본값 | 유효성 조건 |
|-------------|-----------|-----------|--------|-------------|
| 오류코드 | 텍스트 입력 (자동완성) | 선택 | 빈 값 | 등록된 오류코드 목록에서 자동완성 |
| 오류발생일 (시작) | 날짜 선택 | 선택 | 1개월 전 | - |
| 오류발생일 (종료) | 날짜 선택 | 선택 | 오늘 | 시작일 이후여야 함 |

### 목록 표시

| 컬럼명 | 데이터 유형 | 정렬 가능 | 비고 |
|--------|-------------|-----------|------|
| 오류코드 | 텍스트 | 가능 | - |
| 오류제목 | 텍스트 | 가능 | - |
| 발생횟수 | 숫자 | 가능 | - |
| 첫발생일 | 날짜 | 가능 | YYYY-MM-DD HH:mm:ss |
| 마지막발생일 | 날짜 | 가능 | YYYY-MM-DD HH:mm:ss |
| 처리상태 | 상태 배지 | 불가 | 미처리=빨강, 처리중=노랑, 처리완료=초록 |

- 기본 정렬 기준: 마지막발생일 내림차순
- 페이지당 기본 표시 건수: 20건

### 버튼 및 액션

| 버튼명 | 노출 조건 | 클릭 동작 | 권한 제어 |
|--------|-----------|-----------|-----------|
| 엑셀 | 항상 노출 | 검색 결과 엑셀 다운로드 | 전체 |
| 출력 | 항상 노출 | 목록 인쇄 | 전체 |

### 개별 기능 요구사항

- 오류코드 입력 필드는 자동완성 기능을 제공하여야 한다. 등록된 오류코드 목록에서 입력 값에 맞는 항목이 드롭다운으로 표시되어야 한다.
- 오류발생일 검색 범위의 기본값은 최근 1개월이어야 한다.
- 처리상태 배지는 색상으로 시각 구분되어야 한다 (미처리=빨강, 처리중=노랑, 처리완료=초록).

### 비기능 요구사항

| 항목 | 요구사항 |
|------|----------|
| 응답 속도 | 오류 발생 현황 조회 결과가 3초 이내에 표시되어야 한다 |

---

## 에러 내역 통계

**화면 목적**: 기간별/채널별 오류 발생 통계를 조회하고, 오류 추이를 시각적으로 분석하며, 개별 오류의 Trace 내역을 확인하는 화면이다 (조회 전용).

**접근 경로**: GNB > 오류 관리 > 에러 내역 통계

**화면 유형**: 조회 전용 화면 (템플릿 B 참조)

### 화면 레이아웃 구성

| 영역 | 설명 |
|------|------|
| 검색 필터 영역 | 상단, 조회기간 날짜범위 + 채널 드롭다운 + 오류코드 텍스트 + 조회 건수 + 조회 버튼 |
| 도구 모음 | 목록 상단 우측, 엑셀 / 출력 버튼 |
| 요약 통계 카드 영역 | 상단, 주요 통계 지표를 카드 형태로 4개 수평 배치 |
| 차트 영역 | 중단, 기간별 오류 추이 차트 |
| 목록 영역 | 하단, 오류 코드별 상세 통계 테이블 |
| 페이지 네비게이션 | 목록 하단 |

### 검색 / 필터

| 필터 항목명 | 입력 유형 | 필수 여부 | 기본값 | 유효성 조건 |
|-------------|-----------|-----------|--------|-------------|
| 조회기간 (시작) | 날짜 선택 | 선택 | 1개월 전 | - |
| 조회기간 (종료) | 날짜 선택 | 선택 | 오늘 | 시작일 이후여야 함 |
| 채널 | 드롭다운 (전체 + 채널 목록) | 선택 | 전체 | API에서 동적 로드 |
| 오류코드 | 텍스트 입력 | 선택 | 빈 값 | - |

### 요약 통계 카드 영역

| 카드명 | 표시 내용 | 비고 |
|--------|-----------|------|
| 총 오류 건수 | 조회 기간 내 전체 오류 발생 건수 | 숫자 크게 표시 |
| 고유 오류 코드 수 | 조회 기간 내 발생한 고유 오류 코드의 수 | 숫자 크게 표시 |
| 최다 발생 오류 | 가장 많이 발생한 오류코드 및 건수 | 오류코드 + 건수 표시 |
| 평균 발생 건수 | 오류 코드당 평균 발생 건수 | 소수점 1자리까지 표시 |

- 각 카드에는 숫자(건수)가 크게 표시되어야 한다.
- 총 오류 건수가 0보다 큰 경우 강조 색상(빨강)으로 표시되어야 한다.

### 차트 영역

| 항목 | 설명 |
|------|------|
| 차트 유형 | 막대/선 복합 그래프 (일별 발생 건수) |
| X축 | 날짜 (일별) |
| Y축 | 오류 발생 건수 |
| 막대 그래프 | 일별 전체 오류 발생 건수 |
| 선 그래프 | 일별 오류 발생 추이선 |

- 조회 기간에 따라 X축 간격이 자동 조정되어야 한다.
- 마우스 호버 시 해당 날짜의 상세 건수가 툴팁으로 표시되어야 한다.

### 목록 표시

| 컬럼명 | 데이터 유형 | 정렬 가능 | 비고 |
|--------|-------------|-----------|------|
| 오류코드 | 텍스트 | 가능 | - |
| 오류제목 | 텍스트 | 불가 | - |
| 발생건수 | 숫자 | 가능 | - |
| 비율(%) | 숫자 | 불가 | 전체 오류 대비 해당 오류의 비율, 소수점 1자리 |
| 첫발생일 | 날짜 | 가능 | YYYY-MM-DD HH:mm:ss |
| 마지막발생일 | 날짜 | 가능 | YYYY-MM-DD HH:mm:ss |
| Trace | 버튼 | 불가 | 클릭 시 Trace 상세 팝업 열기 |

- 기본 정렬 기준: 발생건수 내림차순
- 페이지당 기본 표시 건수: 20건

### Trace 상세 팝업

선택된 오류코드의 최근 발생 내역을 목록으로 표시하는 팝업이다.

| 컬럼명 | 데이터 유형 | 비고 |
|--------|-------------|------|
| 발생일시 | 날짜/시간 | YYYY-MM-DD HH:mm:ss |
| 거래 ID | 텍스트 | - |
| 기관 | 텍스트 | 기관명 |
| 스택트레이스 | 텍스트 영역 (읽기 전용) | 코드 블록(monospace) 스타일, 접기/펼치기 |

- Trace 팝업 내 목록은 발생일시 내림차순으로 정렬되어야 한다.
- 최대 50건까지 표시되어야 한다.
- 스택트레이스 영역은 접기/펼치기가 가능하여야 한다.

### 버튼 및 액션

| 버튼명 | 노출 조건 | 클릭 동작 | 권한 제어 |
|--------|-----------|-----------|-----------|
| 엑셀 | 항상 노출 | 검색 결과 엑셀 다운로드 (통계 테이블 기준) | 전체 |
| 출력 | 항상 노출 | 목록 인쇄 (차트 + 통계 테이블 포함) | 전체 |
| Trace (목록) | 목록 행 내 | 해당 오류의 Trace 상세 팝업 열기 | 전체 |

### 개별 기능 요구사항

- 조회기간의 기본값은 최근 1개월이어야 한다.
- 채널 드롭다운은 API에서 채널 목록을 동적으로 로드하여야 한다.
- 요약 통계 카드, 차트, 통계 테이블은 검색 조건 변경 후 조회 버튼 클릭 시 동시에 갱신되어야 한다.
- 차트에서 특정 날짜 막대를 클릭하면 해당 날짜의 오류 목록으로 통계 테이블이 필터링되어야 한다.
- Trace 상세 팝업에서 스택트레이스는 코드 블록(monospace) 스타일로 가독성을 높여야 하며, 기본적으로 접힌 상태로 표시되어야 한다.
- 비율(%) 컬럼은 전체 오류 건수 대비 해당 오류코드의 발생 비율을 소수점 1자리까지 표시하여야 한다.
- 엑셀 다운로드 시 요약 통계와 상세 통계 테이블 데이터가 모두 포함되어야 한다.
- 출력 시 차트 이미지와 통계 테이블이 함께 인쇄되어야 한다.

### 비기능 요구사항

| 항목 | 요구사항 |
|------|----------|
| 응답 속도 | 통계 데이터 조회 결과가 3초 이내에 표시되어야 한다 |
| 차트 렌더링 | 차트가 데이터 수신 후 1초 이내에 렌더링 완료되어야 한다 |
| 대량 데이터 | 조회 기간이 1년 이상인 경우에도 정상적으로 차트가 표시되어야 한다 |
